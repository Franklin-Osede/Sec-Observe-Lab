<div class="dashboard-container">
  <div class="dashboard-header">
    <h2>ðŸ“Š Dashboard de MÃ©tricas</h2>
    <p>MÃ©tricas en tiempo real del sistema de autenticaciÃ³n biomÃ©trica</p>
  </div>

  <!-- Loading State -->
  <div class="loading-section" *ngIf="isLoading">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Cargando mÃ©tricas...</p>
  </div>

  <!-- Metrics Grid -->
  <div class="metrics-grid" *ngIf="!isLoading">
    <!-- Total Attempts -->
    <mat-card class="metric-card">
      <mat-card-content>
        <div class="metric-icon">
          <mat-icon>security</mat-icon>
        </div>
        <div class="metric-value">{{ getTotalAttempts() }}</div>
        <div class="metric-label">Total Intentos</div>
      </mat-card-content>
    </mat-card>

    <!-- Success Rate -->
    <mat-card class="metric-card">
      <mat-card-content>
        <div class="metric-icon">
          <mat-icon>check_circle</mat-icon>
        </div>
        <div class="metric-value">{{ getSuccessRate() }}%</div>
        <div class="metric-label">Tasa de Ã‰xito</div>
      </mat-card-content>
    </mat-card>

    <!-- WebAuthn -->
    <mat-card class="metric-card">
      <mat-card-content>
        <div class="metric-icon">
          <mat-icon>fingerprint</mat-icon>
        </div>
        <div class="metric-value">{{ getMetricValue('webauthn_authentication_total') }}</div>
        <div class="metric-label">WebAuthn</div>
      </mat-card-content>
    </mat-card>

    <!-- Fingerprint -->
    <mat-card class="metric-card">
      <mat-card-content>
        <div class="metric-icon">
          <mat-icon>touch_app</mat-icon>
        </div>
        <div class="metric-value">{{ getMetricValue('fingerprint_recognition_total') }}</div>
        <div class="metric-label">Huella</div>
      </mat-card-content>
    </mat-card>

    <!-- Face Recognition -->
    <mat-card class="metric-card">
      <mat-card-content>
        <div class="metric-icon">
          <mat-icon>face</mat-icon>
        </div>
        <div class="metric-value">{{ getMetricValue('face_recognition_total') }}</div>
        <div class="metric-label">Rostro</div>
      </mat-card-content>
    </mat-card>

    <!-- QR Code -->
    <mat-card class="metric-card">
      <mat-card-content>
        <div class="metric-icon">
          <mat-icon>qr_code</mat-icon>
        </div>
        <div class="metric-value">{{ getMetricValue('qr_code_validation_total') }}</div>
        <div class="metric-label">QR Code</div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Chart Section -->
  <div class="chart-section" *ngIf="!isLoading">
    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>ðŸ“ˆ DistribuciÃ³n por MÃ©todo</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="chart-container">
          <canvas baseChart
                  [data]="chartData"
                  [options]="chartOptions"
                  type="doughnut">
          </canvas>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
