{"ast":null,"code":"import _asyncToGenerator from \"/Users/domoblock/Documents/Projycto/sec-observe-lab/01-monitoring-stack/biometric-auth/angular-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from '@angular/common';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { WebauthnComponent } from './components/webauthn/webauthn.component';\nimport { FingerprintComponent } from './components/fingerprint/fingerprint.component';\nimport { FaceRecognitionComponent } from './components/face-recognition/face-recognition.component';\nimport { QrCodeComponent } from './components/qr-code/qr-code.component';\nimport { DashboardComponent } from './components/dashboard/dashboard.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./services/biometric.service\";\nimport * as i2 from \"./services/metrics.service\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/toolbar\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/card\";\nimport * as i9 from \"@angular/material/tabs\";\nimport * as i10 from \"@angular/material/progress-spinner\";\nfunction AppComponent_ng_template_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-webauthn\", 20);\n    i0.ɵɵlistener(\"statusChange\", function AppComponent_ng_template_26_Template_app_webauthn_statusChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onBiometricStatusChange(\"WebAuthn\", $event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"username\", ctx_r1.currentUser);\n  }\n}\nfunction AppComponent_ng_template_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-fingerprint\", 20);\n    i0.ɵɵlistener(\"statusChange\", function AppComponent_ng_template_28_Template_app_fingerprint_statusChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onBiometricStatusChange(\"Fingerprint\", $event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"username\", ctx_r1.currentUser);\n  }\n}\nfunction AppComponent_ng_template_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-face-recognition\", 20);\n    i0.ɵɵlistener(\"statusChange\", function AppComponent_ng_template_30_Template_app_face_recognition_statusChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onBiometricStatusChange(\"Face\", $event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"username\", ctx_r1.currentUser);\n  }\n}\nfunction AppComponent_ng_template_32_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-qr-code\", 20);\n    i0.ɵɵlistener(\"statusChange\", function AppComponent_ng_template_32_Template_app_qr_code_statusChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onBiometricStatusChange(\"QR\", $event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"username\", ctx_r1.currentUser);\n  }\n}\nfunction AppComponent_ng_template_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-dashboard\", 21);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"metrics\", ctx_r1.metrics)(\"isLoading\", ctx_r1.isLoading);\n  }\n}\nfunction AppComponent_mat_card_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 22)(1, \"mat-card-header\")(2, \"mat-card-title\");\n    i0.ɵɵtext(3, \"\\uD83C\\uDFE5 Estado del Sistema\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"mat-card-content\")(5, \"div\", 23)(6, \"div\", 24)(7, \"mat-icon\");\n    i0.ɵɵtext(8, \"storage\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"span\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 24)(12, \"mat-icon\");\n    i0.ɵɵtext(13, \"schedule\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"span\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 24)(17, \"mat-icon\");\n    i0.ɵɵtext(18, \"check_circle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"span\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵclassProp(\"success\", ctx_r1.systemStatus.redis);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Redis: \", ctx_r1.systemStatus.redis ? \"OK\" : \"Error\", \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"success\", ctx_r1.systemStatus.uptime);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Uptime: \", ctx_r1.systemStatus.uptime || \"N/A\", \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"success\", !ctx_r1.isLoading);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Sistema: \", ctx_r1.isLoading ? \"Cargando...\" : \"Activo\", \"\");\n  }\n}\nfunction AppComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵelement(1, \"mat-spinner\", 26);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Cargando...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(biometricService, metricsService, snackBar) {\n      this.biometricService = biometricService;\n      this.metricsService = metricsService;\n      this.snackBar = snackBar;\n      this.currentUser = 'testuser';\n      this.isLoading = false;\n      this.systemStatus = null;\n      this.metrics = null;\n    }\n    ngOnInit() {\n      this.checkSystemHealth();\n      this.refreshMetrics();\n    }\n    onUserChange() {\n      console.log('Usuario cambiado:', this.currentUser);\n      this.refreshMetrics();\n    }\n    onBiometricStatusChange(method, status) {\n      console.log(`Estado ${method}:`, status);\n      if (status.success) {\n        this.snackBar.open(`✅ ${method} exitoso`, 'Cerrar', {\n          duration: 3000,\n          panelClass: ['success-snackbar']\n        });\n      } else {\n        this.snackBar.open(`❌ ${method} falló: ${status.error}`, 'Cerrar', {\n          duration: 5000,\n          panelClass: ['error-snackbar']\n        });\n      }\n    }\n    checkSystemHealth() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        _this.isLoading = true;\n        try {\n          _this.systemStatus = yield _this.biometricService.checkHealth();\n          _this.snackBar.open('✅ Sistema verificado', 'Cerrar', {\n            duration: 2000\n          });\n        } catch (error) {\n          _this.snackBar.open(`❌ Error verificando sistema: ${error}`, 'Cerrar', {\n            duration: 5000\n          });\n        } finally {\n          _this.isLoading = false;\n        }\n      })();\n    }\n    refreshMetrics() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        _this2.isLoading = true;\n        try {\n          _this2.metrics = yield _this2.metricsService.getMetrics();\n        } catch (error) {\n          console.error('Error obteniendo métricas:', error);\n        } finally {\n          _this2.isLoading = false;\n        }\n      })();\n    }\n    static {\n      this.ɵfac = function AppComponent_Factory(t) {\n        return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.BiometricService), i0.ɵɵdirectiveInject(i2.MetricsService), i0.ɵɵdirectiveInject(i3.MatSnackBar));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AppComponent,\n        selectors: [[\"app-root\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 37,\n        vars: 5,\n        consts: [[1, \"app-container\"], [\"color\", \"primary\", 1, \"app-header\"], [1, \"app-title\"], [1, \"app-subtitle\"], [1, \"spacer\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Verificar Salud del Sistema\", 3, \"click\", \"disabled\"], [\"mat-icon-button\", \"\", \"matTooltip\", \"Actualizar M\\u00E9tricas\", 3, \"click\", \"disabled\"], [1, \"main-content\"], [1, \"container\"], [1, \"user-section\"], [\"type\", \"text\", \"placeholder\", \"Ingresa tu nombre de usuario\", 1, \"user-input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"tests-section\"], [\"label\", \"\\uD83D\\uDD11 WebAuthn\"], [\"matTabContent\", \"\"], [\"label\", \"\\uD83D\\uDC46 Huella\"], [\"label\", \"\\uD83D\\uDCF7 Rostro\"], [\"label\", \"\\uD83D\\uDCF1 QR\"], [\"label\", \"\\uD83D\\uDCCA Dashboard\"], [\"class\", \"status-section\", 4, \"ngIf\"], [\"class\", \"loading-overlay\", 4, \"ngIf\"], [3, \"statusChange\", \"username\"], [3, \"metrics\", \"isLoading\"], [1, \"status-section\"], [1, \"status-grid\"], [1, \"status-item\"], [1, \"loading-overlay\"], [\"diameter\", \"50\"]],\n        template: function AppComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"mat-toolbar\", 1)(2, \"mat-icon\");\n            i0.ɵɵtext(3, \"security\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"span\", 2);\n            i0.ɵɵtext(5, \"\\uD83D\\uDD10 Sec-Observe-Lab\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"span\", 3);\n            i0.ɵɵtext(7, \"Autenticaci\\u00F3n Biom\\u00E9trica\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(8, \"div\", 4);\n            i0.ɵɵelementStart(9, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_9_listener() {\n              return ctx.checkSystemHealth();\n            });\n            i0.ɵɵelementStart(10, \"mat-icon\");\n            i0.ɵɵtext(11, \"health_and_safety\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(12, \"button\", 6);\n            i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_12_listener() {\n              return ctx.refreshMetrics();\n            });\n            i0.ɵɵelementStart(13, \"mat-icon\");\n            i0.ɵɵtext(14, \"refresh\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(15, \"div\", 7)(16, \"div\", 8)(17, \"mat-card\", 9)(18, \"mat-card-header\")(19, \"mat-card-title\");\n            i0.ɵɵtext(20, \"\\uD83D\\uDC64 Usuario\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(21, \"mat-card-content\")(22, \"input\", 10);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function AppComponent_Template_input_ngModelChange_22_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.currentUser, $event) || (ctx.currentUser = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"ngModelChange\", function AppComponent_Template_input_ngModelChange_22_listener() {\n              return ctx.onUserChange();\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(23, \"mat-card\", 11)(24, \"mat-tab-group\")(25, \"mat-tab\", 12);\n            i0.ɵɵtemplate(26, AppComponent_ng_template_26_Template, 1, 1, \"ng-template\", 13);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"mat-tab\", 14);\n            i0.ɵɵtemplate(28, AppComponent_ng_template_28_Template, 1, 1, \"ng-template\", 13);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(29, \"mat-tab\", 15);\n            i0.ɵɵtemplate(30, AppComponent_ng_template_30_Template, 1, 1, \"ng-template\", 13);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(31, \"mat-tab\", 16);\n            i0.ɵɵtemplate(32, AppComponent_ng_template_32_Template, 1, 1, \"ng-template\", 13);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(33, \"mat-tab\", 17);\n            i0.ɵɵtemplate(34, AppComponent_ng_template_34_Template, 1, 2, \"ng-template\", 13);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(35, AppComponent_mat_card_35_Template, 21, 9, \"mat-card\", 18);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(36, AppComponent_div_36_Template, 4, 0, \"div\", 19);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(9);\n            i0.ɵɵproperty(\"disabled\", ctx.isLoading);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"disabled\", ctx.isLoading);\n            i0.ɵɵadvance(10);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.currentUser);\n            i0.ɵɵadvance(13);\n            i0.ɵɵproperty(\"ngIf\", ctx.systemStatus);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          }\n        },\n        dependencies: [CommonModule, i4.NgIf, MatToolbarModule, i5.MatToolbar, MatButtonModule, i6.MatIconButton, MatIconModule, i7.MatIcon, MatCardModule, i8.MatCard, i8.MatCardContent, i8.MatCardHeader, i8.MatCardTitle, MatTabsModule, i9.MatTabContent, i9.MatTab, i9.MatTabGroup, MatProgressSpinnerModule, i10.MatProgressSpinner, MatSnackBarModule, WebauthnComponent, FingerprintComponent, FaceRecognitionComponent, QrCodeComponent, DashboardComponent],\n        styles: [\".app-container[_ngcontent-%COMP%]{min-height:100vh;background:var(--background-gradient)}.app-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;box-shadow:0 2px 10px #0000001a}.app-title[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin-left:10px}.app-subtitle[_ngcontent-%COMP%]{font-size:.9em;opacity:.8;margin-left:10px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.main-content[_ngcontent-%COMP%]{padding:2rem}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.user-section[_ngcontent-%COMP%], .tests-section[_ngcontent-%COMP%], .status-section[_ngcontent-%COMP%]{margin-bottom:2rem}.status-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.status-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;background:#f5f5f5;transition:var(--transition)}.status-item.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;color:#fff}.loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.1em}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{padding:1rem}.app-title[_ngcontent-%COMP%]{font-size:1.2em}.app-subtitle[_ngcontent-%COMP%]{display:none}}\"]\n      });\n    }\n  }\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}