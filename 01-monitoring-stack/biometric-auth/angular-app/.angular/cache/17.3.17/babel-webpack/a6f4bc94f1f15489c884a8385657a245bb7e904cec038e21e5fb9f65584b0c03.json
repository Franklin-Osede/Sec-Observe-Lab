{"ast":null,"code":"import _asyncToGenerator from \"/Users/domoblock/Documents/Projycto/sec-observe-lab/01-monitoring-stack/biometric-auth/angular-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/biometric.service\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/card\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/progress-spinner\";\nfunction FaceRecognitionComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7)(2, \"mat-icon\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"success\", ctx_r0.currentStatus.success)(\"error\", !ctx_r0.currentStatus.success);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.currentStatus.success ? \"check_circle\" : \"error\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r0.currentStatus.method, \": \", ctx_r0.currentStatus.success ? \"Exitoso\" : \"Fall\\u00F3\", \"\");\n  }\n}\nfunction FaceRecognitionComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelement(1, \"mat-spinner\", 9);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Procesando rostro...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let FaceRecognitionComponent = /*#__PURE__*/(() => {\n  class FaceRecognitionComponent {\n    constructor(biometricService, snackBar) {\n      this.biometricService = biometricService;\n      this.snackBar = snackBar;\n      this.username = '';\n      this.statusChange = new EventEmitter();\n      this.isLoading = false;\n      this.currentStatus = null;\n    }\n    ngOnInit() {\n      if (this.username) {\n        console.log('Face recognition component initialized for:', this.username);\n      }\n    }\n    testFaceRecognition() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (!_this.username) {\n          _this.snackBar.open('❌ Usuario requerido', 'Cerrar', {\n            duration: 3000\n          });\n          return;\n        }\n        _this.isLoading = true;\n        try {\n          const result = yield _this.biometricService.recognizeFace(_this.username, `face-${Date.now()}`);\n          _this.currentStatus = result;\n          _this.statusChange.emit(result);\n          if (result.success) {\n            _this.snackBar.open('✅ Rostro reconocido correctamente', 'Cerrar', {\n              duration: 3000\n            });\n          } else {\n            _this.snackBar.open(`❌ Error: ${result.error}`, 'Cerrar', {\n              duration: 5000\n            });\n          }\n        } catch (error) {\n          _this.snackBar.open(`❌ Error: ${error.message}`, 'Cerrar', {\n            duration: 5000\n          });\n        } finally {\n          _this.isLoading = false;\n        }\n      })();\n    }\n    static {\n      this.ɵfac = function FaceRecognitionComponent_Factory(t) {\n        return new (t || FaceRecognitionComponent)(i0.ɵɵdirectiveInject(i1.BiometricService), i0.ɵɵdirectiveInject(i2.MatSnackBar));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: FaceRecognitionComponent,\n        selectors: [[\"app-face-recognition\"]],\n        inputs: {\n          username: \"username\"\n        },\n        outputs: {\n          statusChange: \"statusChange\"\n        },\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 21,\n        vars: 3,\n        consts: [[1, \"face-container\"], [1, \"face-card\"], [\"class\", \"status-section\", 4, \"ngIf\"], [1, \"test-section\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", \"disabled\"], [\"class\", \"loading-section\", 4, \"ngIf\"], [1, \"status-section\"], [1, \"status-item\"], [1, \"loading-section\"], [\"diameter\", \"40\"]],\n        template: function FaceRecognitionComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"mat-card\", 1)(2, \"mat-card-header\")(3, \"mat-card-title\")(4, \"mat-icon\");\n            i0.ɵɵtext(5, \"face\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(6, \" Reconocimiento Facial \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"mat-card-subtitle\");\n            i0.ɵɵtext(8, \" Reconocimiento facial con c\\u00E1mara \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(9, \"mat-card-content\");\n            i0.ɵɵtemplate(10, FaceRecognitionComponent_div_10_Template, 6, 7, \"div\", 2);\n            i0.ɵɵelementStart(11, \"div\", 3)(12, \"h3\");\n            i0.ɵɵtext(13, \"\\uD83D\\uDCF7 Prueba de Reconocimiento Facial\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"p\");\n            i0.ɵɵtext(15, \"Simula reconocimiento facial con c\\u00E1mara\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"button\", 4);\n            i0.ɵɵlistener(\"click\", function FaceRecognitionComponent_Template_button_click_16_listener() {\n              return ctx.testFaceRecognition();\n            });\n            i0.ɵɵelementStart(17, \"mat-icon\");\n            i0.ɵɵtext(18, \"face\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(19, \" Probar Rostro \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(20, FaceRecognitionComponent_div_20_Template, 4, 0, \"div\", 5);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(10);\n            i0.ɵɵproperty(\"ngIf\", ctx.currentStatus);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"disabled\", ctx.isLoading);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          }\n        },\n        dependencies: [CommonModule, i3.NgIf, FormsModule, MatCardModule, i4.MatCard, i4.MatCardContent, i4.MatCardHeader, i4.MatCardSubtitle, i4.MatCardTitle, MatButtonModule, i5.MatButton, MatIconModule, i6.MatIcon, MatProgressSpinnerModule, i7.MatProgressSpinner, MatSnackBarModule],\n        styles: [\".face-container[_ngcontent-%COMP%]{padding:1rem}.face-card[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.status-section[_ngcontent-%COMP%]{margin:1rem 0}.status-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;background:#f5f5f5;margin:10px 0}.status-item.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-item.error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.test-section[_ngcontent-%COMP%]{margin:2rem 0;padding:1.5rem;border:2px solid #f0f0f0;border-radius:15px;transition:var(--transition)}.test-section[_ngcontent-%COMP%]:hover{border-color:var(--primary-color)}.loading-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;margin:2rem 0}\"]\n      });\n    }\n  }\n  return FaceRecognitionComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}